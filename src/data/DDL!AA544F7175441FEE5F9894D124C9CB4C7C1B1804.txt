
  CREATE OR REPLACE FORCE VIEW "CWMS_20"."AV_LOC_GRP_ASSGN" ("CATEGORY_ID", "GROUP_ID", "LOCATION_CODE", "DB_OFFICE_ID", "BASE_LOCATION_ID", "SUB_LOCATION_ID", "LOCATION_ID", "ALIAS_ID", "ATTRIBUTE", "REF_LOCATION_ID", "SHARED_ALIAS_ID", "SHARED_REF_LOCATION_ID") AS 
  SELECT    atlc.loc_category_id, atlg.loc_group_id, atlga.location_code,
                co.office_id db_office_id, abl.base_location_id,
                atpl.sub_location_id,
                abl.base_location_id || SUBSTR ('-', 1, LENGTH (atpl.sub_location_id)) || atpl.sub_location_id location_id,
                atlga.loc_alias_id, atlga.loc_attribute,
                abl2.base_location_id || SUBSTR ('-', 1, LENGTH (atpl2.sub_location_id)) || atpl2.sub_location_id ref_location_id,
                atlg.shared_loc_alias_id,
                abl3.base_location_id || SUBSTR ('-', 1, LENGTH (atpl3.sub_location_id)) || atpl3.sub_location_id shared_ref_location_id
      FROM    at_physical_location atpl,
                at_base_location abl,
                at_loc_group_assignment atlga,
                at_loc_group atlg,
                at_loc_category atlc,
                cwms_office co,
                at_physical_location atpl2,
                at_base_location abl2,
                at_physical_location atpl3,
                at_base_location abl3
     WHERE         atlga.location_code = atpl.location_code
                AND atpl.base_location_code = abl.base_location_code
                AND atlga.loc_group_code = atlg.loc_group_code
                AND atlg.loc_category_code = atlc.loc_category_code
                AND abl.db_office_code = co.office_code
                AND atpl2.location_code(+) = atlga.loc_ref_code
                AND atpl2.base_location_code = abl2.base_location_code(+)
                AND atpl3.location_code(+) = atlg.shared_loc_ref_code
                AND atpl3.base_location_code = abl3.base_location_code(+)
 
  GRANT SELECT ON "CWMS_20"."AV_LOC_GRP_ASSGN" TO "CWMS_USER"
 