
  CREATE OR REPLACE FORCE VIEW "CWMS_20"."AV_SEC_TS_PRIVILEGES" ("DB_OFFICE_CODE", "USERNAME", "TS_CODE", "NET_PRIVILEGE_BIT") AS 
  SELECT   db_office_code, username, ts_code,
                  SUM (privilege_bit) net_privilege_bit
         FROM   (SELECT    UNIQUE db_office_code, username, ts_code, privilege_bit
                      FROM        (SELECT     db_office_code, username, ts_group_mask,
                                                 privilege_bit
                                        FROM             at_sec_users
                                                     JOIN
                                                         at_sec_allow
                                                     USING (db_office_code, user_group_code)
                                                 JOIN
                                                     at_sec_ts_group_masks
                                                 USING (db_office_code, ts_group_code))
                                JOIN
                                    mv_cwms_ts_id
                                USING (db_office_code)
                     WHERE    UPPER (cwms_ts_id) LIKE ts_group_mask ESCAPE '\')
    GROUP BY   db_office_code, username, ts_code
 