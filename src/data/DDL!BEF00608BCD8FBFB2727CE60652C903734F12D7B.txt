
  CREATE TABLE "CWMS_20"."AT_PHYSICAL_LOCATION" 
   (	"LOCATION_CODE" NUMBER(10,0) NOT NULL ENABLE, 
	"BASE_LOCATION_CODE" NUMBER(10,0) NOT NULL ENABLE, 
	"SUB_LOCATION_ID" VARCHAR2(32), 
	"TIME_ZONE_CODE" NUMBER(10,0), 
	"COUNTY_CODE" NUMBER(10,0), 
	"LOCATION_TYPE" VARCHAR2(32), 
	"ELEVATION" NUMBER, 
	"VERTICAL_DATUM" VARCHAR2(16), 
	"LONGITUDE" NUMBER, 
	"LATITUDE" NUMBER, 
	"HORIZONTAL_DATUM" VARCHAR2(16), 
	"PUBLIC_NAME" VARCHAR2(32), 
	"LONG_NAME" VARCHAR2(80), 
	"DESCRIPTION" VARCHAR2(1024), 
	"ACTIVE_FLAG" VARCHAR2(1), 
	"LOCATION_KIND" NUMBER(10,0), 
	"MAP_LABEL" VARCHAR2(50), 
	"PUBLISHED_LATITUDE" NUMBER, 
	"PUBLISHED_LONGITUDE" NUMBER, 
	"OFFICE_CODE" NUMBER(10,0), 
	"NATION_CODE" VARCHAR2(2), 
	"NEAREST_CITY" VARCHAR2(50), 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_PK" PRIMARY KEY ("LOCATION_CODE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "CWMS_20DATA"  ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_CK1" CHECK (TRIM(SUB_LOCATION_ID) = SUB_LOCATION_ID) ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_CK2" CHECK (ACTIVE_FLAG ='T' OR ACTIVE_FLAG = 'F') ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_FK1" FOREIGN KEY ("BASE_LOCATION_CODE")
	  REFERENCES "CWMS_20"."AT_BASE_LOCATION" ("BASE_LOCATION_CODE") ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_FK2" FOREIGN KEY ("COUNTY_CODE")
	  REFERENCES "CWMS_20"."CWMS_COUNTY" ("COUNTY_CODE") ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_FK3" FOREIGN KEY ("TIME_ZONE_CODE")
	  REFERENCES "CWMS_20"."CWMS_TIME_ZONE" ("TIME_ZONE_CODE") ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_FK4" FOREIGN KEY ("LOCATION_KIND")
	  REFERENCES "CWMS_20"."AT_LOCATION_KIND" ("LOCATION_KIND_CODE") ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_FK5" FOREIGN KEY ("OFFICE_CODE")
	  REFERENCES "CWMS_20"."CWMS_OFFICE" ("OFFICE_CODE") ENABLE, 
	 CONSTRAINT "AT_PHYSICAL_LOCATION_FK6" FOREIGN KEY ("NATION_CODE")
	  REFERENCES "CWMS_20"."CWMS_NATION" ("NATION_CODE") ENABLE
   ) PCTFREE 10 PCTUSED 0 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 516096 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "CWMS_20AT_DATA" 
 
  CREATE UNIQUE INDEX "CWMS_20"."AT_PHYSICAL_LOCATION_PK" ON "CWMS_20"."AT_PHYSICAL_LOCATION" ("LOCATION_CODE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "CWMS_20DATA" 
 
  CREATE UNIQUE INDEX "CWMS_20"."AT_PHYSICAL_LOCATION_U1" ON "CWMS_20"."AT_PHYSICAL_LOCATION" ("BASE_LOCATION_CODE", UPPER("SUB_LOCATION_ID")) 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "CWMS_20AT_DATA" 
 
  CREATE OR REPLACE TRIGGER "CWMS_20"."AT_PHYSICAL_LOCATION_T01" 
    AFTER UPDATE OF active_flag, sub_location_id, base_location_code
    ON at_physical_location
    REFERENCING NEW AS new OLD AS old
    FOR EACH ROW
DECLARE
BEGIN
    cwms_ts_id.touched_apl (:new.location_code,
                                    :new.active_flag,
                                    :new.sub_location_id,
                                    :new.base_location_code
                                  );
EXCEPTION
    WHEN OTHERS
    THEN
        -- Consider logging the error and then re-raise
        RAISE;
END at_physical_location_t01;
ALTER TRIGGER "CWMS_20"."AT_PHYSICAL_LOCATION_T01" ENABLE
 