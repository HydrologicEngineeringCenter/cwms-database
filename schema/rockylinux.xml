<project name="wcdba oracle overrides">
	<!-- properties for oracle cc build . -->
	
	<!-- oracle user to build CWMS schema -->
	<property name="oracle.builduser" value="builduser"/>

	<!-- oracle.builduser password -->
	<property name="oracle.builduser.password" value="BUILDUSER_PASS"/>

	<!-- the oracle hostport to install to. -->
	<property name="oracle.cwms.hostport" value="rockylinux8:1521"/>

	<!-- the oracle instance to install to. -->
 	<property name="oracle.cwms.instance" value="rockylinux8:1521/pdb1"/>

 	<!-- the oracle user to install to the oracle instance. -->
 	<property name="oracle.cwms.user" value="CWMS_20"/>

	<!-- the office that owns the cwms database instance. -->
	<property name="office.primary.id" value="SWT"/>
	<property name="office.primary.code" value="m5"/>

	<!-- the offices that also use this cwms database instance. -->
	<!-- secondary is optional and the value can be 0 to many offices separated by a space. -->
	<property name="office.secondary.id" value="SWF SWL SWG"/>

	<property name="oracle.sys.password" value="IamWally01++"/>
	<property name="oracle.cwms.password" value="cwmsdev"/>

	<!-- the password for the ${office.primary.code}cwmspd account -->
	<property name="oracle.cwmspd.password" value="cwmsdev"/>

	<!-- the password for the ${office.primary.code}hectest account -->
	<property name="oracle.hectest.password" value="cwmsdev"/>

	<!-- flag to create the test account -->
	<property name="test.account.create" value="-testaccount"/>

	<!-- flags to control output of auto kill and auto build -->
	<property name="autobuild.echo" value="ON"/>
	<property name="autokill.echo" value="ON"/>

	<!-- flags to force the kill script to ignore errors. -->
	<property name="autokill.force" value="-force"/>

	<!-- locally-defined set of tests (tests defined in build.xml) -->
    <target name="test-custom" description="run single test as a PD user">
        <if>
            <available file="build/tests.log"/>
            <then></then>
            <else><antcall target="setup-tests"/></else>
        </if>

        <echo message="    Running custom tests" />
        <exec executable="utplsql" resultproperty="utreturn">
            <arg value="run"/>
	    <arg value="-p=${oracle.cwms.user}.test_lrts_updates"/>
            <arg value="-f"/><arg value="UT_COVERAGE_HTML_REPORTER"/><arg value="-o"/><arg value="${coverage.dir}/index.html" />
            <arg value="-f"/><arg value="UT_COVERAGE_COBERTURA_REPORTER"/><arg value="-o"/><arg value="${coverage.dir}/coverage_pd.xml" />
            <arg value="-f"/><arg value="UT_JUNIT_REPORTER"/><arg value="-o"/><arg value="build/tests_pd.xml" />
            <arg value="-f"/><arg value="UT_DOCUMENTATION_REPORTER"/>
            <arg value="-d"/>
            <arg value="${office.primary.code}cwmspd/${oracle.cwmspd.password}@${oracle.cwms.instance}" />
        </exec>

		<fail>
			<condition>
				<not>
					<equals arg1="0" arg2="${utreturn}"/>
				</not>
			</condition>
		</fail>

    </target>
	
</project>
